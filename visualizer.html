<!DOCTYPE html>
<!-- saved from url=(0063)https://www.chartjs.org/samples/latest/charts/bar/vertical.html -->
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Visualizer</title>
    <script async="" src="visualizer/analytics.js"></script>
    <script src="visualizer/Chart.min.js"></script>
    <script src="visualizer/utils.js"></script>
    <script
      src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"
      type="text/javascript"
    ></script>

    <style type="text/css"></style>
  </head>

  <body>
    <div style="column-count: 2">
      <div>
        <canvas id="canvas"></canvas>
      </div>
      <div>
        <canvas id="canvas2"></canvas>
      </div>
      <div>
        <canvas id="canvas3"></canvas>
      </div>
    </div>

    <script>
      var color = Chart.helpers.color;
      var colorNames = Object.keys(window.chartColors);

      var graph1Data;
      var graph2Data;
      var graph3Data;
      $.getJSON('server1/log.json', function (json) {
        graph1Data = {
          datasets: [
            {
              label: 'Server 1',
              backgroundColor: color(window.chartColors.red)
                .alpha(0.5)
                .rgbString(),
              borderColor: window.chartColors.red,
              borderWidth: 1,
              pointRadius: 10,
              data: [
                {
                  x: json.totalRequests,
                  y: json.elapsedTime,
                },
              ],
            },
          ],
        };

        $.getJSON('server2/log.json', function (json) {
          graph1Data.datasets.push({
            label: 'Server 2',
            backgroundColor: color(window.chartColors.blue)
              .alpha(0.5)
              .rgbString(),
            borderColor: window.chartColors.blue,
            borderWidth: 1,
            pointRadius: 10,
            data: [
              {
                x: json.totalRequests,
                y: json.elapsedTime,
              },
            ],
          });

          $.getJSON('server3/log.json', function (json) {
            graph1Data.datasets.push({
              label: 'Server 3',
              backgroundColor: color(window.chartColors.yellow)
                .alpha(0.5)
                .rgbString(),
              borderColor: window.chartColors.yellow,
              borderWidth: 1,
              pointRadius: 10,
              data: [
                {
                  x: json.totalRequests,
                  y: json.elapsedTime,
                },
              ],
            });

            graph2Data = JSON.parse(JSON.stringify(graph1Data));

            for (let i = 0; i < 3; i++) {
              graph2Data.datasets[i].data[0].y =
                graph2Data.datasets[i].data[0].y /
                graph2Data.datasets[i].data[0].x;
            }

            var chart1 = document.getElementById('canvas').getContext('2d');
            var chart2 = document.getElementById('canvas2').getContext('2d');
            var chart3 = document.getElementById('canvas3').getContext('2d');

            window.myBar = new Chart(chart1, {
              type: 'scatter',
              data: graph1Data,
              options: {
                showLines: true,
                responsive: true,
                legend: {
                  position: 'top',
                },
                title: {
                  display: true,
                  text:
                    'Gráfica 1: Cantidad de solicitudes por tiempo de ejecución total',
                },
                /*
            scales: {
              yAxes: [
                {
                  ticks: {
                    beginAtZero: true,
                  },
                },
              ],
            },
            */
              },
            });

            window.myBar = new Chart(chart2, {
              type: 'scatter',
              data: graph2Data,
              options: {
                responsive: true,
                legend: {
                  position: 'top',
                },
                title: {
                  display: true,
                  text:
                    'Gráfica 2: Cantidad de solicitudes por tiempo promedio de ejecución',
                },
              },
            });

            window.myBar = new Chart(chart3, {
              type: 'scatter',
              data: graph2Data,
              options: {
                responsive: true,
                legend: {
                  position: 'top',
                },
                title: {
                  display: true,
                  text: 'Gráfica 3: POR DEFINIR',
                },
              },
            });
          });
        });
      });
    </script>
  </body>
</html>
